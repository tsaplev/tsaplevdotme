(()=>{var e={289:(e,t,s)=>{"use strict";s.r(t)},411:e=>{e.exports=class{constructor(e,t){this.map=e,this.layouts=t,this.generateSelectors(),this.setActionForSelectors(),this.render()}generateSelectors(){Object.entries(this.layouts).forEach((([e,t])=>{Object.defineProperty(t,"map",{value:this.map});const{title:s,style:o}=t;this.map.createSelector(e,s,o)}))}setActionForSelectors(){this.map.onSelect((()=>{Object.entries(this.layouts).forEach((([e,t])=>{this.map.selector!==e&&t.unmount()})),this.layouts[this.map.selector].render()}))}render(){const[e]=Object.values(this.layouts);e.render()}}},984:e=>{e.exports=class{constructor(e,t){this.map=new google.maps.Map(e,t),this.Marker=google.maps.Marker,this.Position=google.maps.LatLng,this.Polyline=google.maps.Polyline,this.Point=google.maps.Point,this.MapType=google.maps.StyledMapType}createSelector(e,t,s){this.map.mapTypes.set(e,new this.MapType(s,{name:t}))}get selector(){return this.map.getMapTypeId()}onSelect(e){this.map.addListener("maptypeid_changed",e)}renderMarker(e,t){return new this.Marker({map:this.map,position:new this.Position(e,t),icon:{url:"./assets/mapmarker.png",anchor:new this.Point(6,23)}})}renderPolyline(e,t){return new this.Polyline({map:this.map,path:e,geodesic:!0,strokeColor:t,strokeOpacity:.9,strokeWeight:2})}renderGeoJSON(e,t){let s=0;this.map.data.forEach((()=>s++)),s?this.map.data.setStyle({visible:!0}):this.map.data.loadGeoJson(e,{idPropertyName:"id"},t),this.map.data.setStyle({fillOpacity:0,strokeWeight:.3})}removeGeoJSON(){this.map.data.setStyle({visible:!1})}}},557:e=>{e.exports=class{constructor(e,t){this.map=null,this.style=e,this.title=t}}},974:(e,t,s)=>{const o=s(557);e.exports=class extends o{constructor(e,t,s){super(e,t),this.markers=[],this.points=Object.values(s)}render(){this.points.forEach((e=>{const[t,s]=e;this.markers.push(this.map.renderMarker(t,s))}))}unmount(){this.markers.forEach((e=>e.setMap(null)))}}},898:(e,t,s)=>{const o=s(557);e.exports=class extends o{constructor(e,t,s){super(e,t),this.markers=[],this.polylines=[],this.airportsPoint=s.points,this.flightsPath=s.paths}render(){this.airportsPoint.forEach((e=>{this.markers.push(this.map.renderMarker(e[0],e[1]))})),this.flightsPath.forEach((e=>this.polylines.push(this.map.renderPolyline([{lat:parseFloat(e[0]),lng:parseFloat(e[1])},{lat:parseFloat(e[2]),lng:parseFloat(e[3])}],e[4]))))}unmount(){["markers","polylines"].forEach((e=>this[e].forEach((e=>e.setMap(null)))))}}},488:(e,t,s)=>{const o=s(557);e.exports=class extends o{constructor(e,t,s,o){super(e,t),this.regions=s,this.data=o}render(){this.map.renderGeoJSON(this.regions,(()=>{const{map:e}=this.map;this.data.forEach((t=>{const s=e.data.getFeatureById(t);s&&e.data.overrideStyle(s,{fillColor:"#FF0000",fillOpacity:.3})}))}))}unmount(){this.map.removeGeoJSON()}}},856:(e,t,s)=>{const{getCurrentLanguage:o}=s(392),r={googleMapApiKey:"AIzaSyDfGO3tpeimm_tFOYe4XJk3La_rxa_DqC0",flightradarUsername:"tsaplev",regionsGeoMap:"https://tsaplev.ru/storage/regions.json",currentYear:(new Date).getFullYear()},l=()=>{const e=window.navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};e.exports={commonInfo:r,databasePath:"//../../travel.db",selectorsTitles:()=>{const e=window.innerWidth<490||"desktop"!==l(),t=("ru",o()||"ru");const s=s=>{const o={"📍":{ru:"📍 Города",en:"📍 Cities"},"✈️":{ru:"✈️ Перелёты",en:"✈️ Flights"},"🌍":{ru:"🌍 Регионы",en:"🌍 Regions"}},r=o[s][t]?o[s][t]:s;return e?s:r};return{citiesSelectorTitle:s("📍"),flightsSelectorTitle:s("✈️"),regionsSelectorTitle:s("🌍")}},googleMapConfig:e=>{const t="desktop"===l(),s=Object.keys(e),[o]=s;return{center:t?{lat:25,lng:-2.5}:{lat:0,lng:0},zoom:t?2:1,scrollwheel:!1,streetViewControl:!1,fullscreenControl:!0,mapTypeId:o,minZoom:t?2:1,restriction:{latLngBounds:{north:85,south:-85,west:-180,east:180}},mapTypeControlOptions:{mapTypeIds:s,style:google.maps.MapTypeControlStyle.DEFAULT}}}}},392:e=>{e.exports={getCurrentLanguage:function(){return window.location.hostname.includes("ru")?"ru":"en"},getSwitcherOptions:e=>{switch(e){case"ru":return{title:"Show in English",icon:"🇬🇧",nextHostname:"tsaplev.me",nextLang:"en"};case"en":return{title:"Показать на русском",icon:"🇷🇺",nextHostname:"tsaplev.ru",nextLang:"ru"}}}}},513:e=>{"use strict";e.exports=JSON.parse('[{"elementType":"geometry","stylers":[{"color":"#212121"}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"elementType":"labels.text.stroke","stylers":[{"color":"#212121"}]},{"featureType":"administrative","elementType":"geometry","stylers":[{"color":"#757575"}]},{"featureType":"administrative.country","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"administrative.land_parcel","stylers":[{"visibility":"off"}]},{"featureType":"administrative.locality","elementType":"labels.text.fill","stylers":[{"color":"#bdbdbd"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#181818"}]},{"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"poi.park","elementType":"labels.text.stroke","stylers":[{"color":"#1b1b1b"}]},{"featureType":"road","elementType":"geometry.fill","stylers":[{"color":"#2c2c2c"}]},{"featureType":"road","elementType":"labels.text.fill","stylers":[{"color":"#8a8a8a"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#373737"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#3c3c3c"}]},{"featureType":"road.highway.controlled_access","elementType":"geometry","stylers":[{"color":"#4e4e4e"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"transit","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#000000"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#3d3d3d"}]}]')}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,s),l.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=s(411),t=s(984),o=s(974),r=s(898),l=s(488),a=s(513),{googleMapConfig:n,selectorsTitles:i,commonInfo:c}=s(856),{getSwitcherOptions:p,getCurrentLanguage:m}=s(392);s(289);const y=window.navigator.platform;if(!y.includes("Mac")&&!y.includes("iP")){const e=document.createElement("script");e.src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js",e.crossorigin="anonymous",e.onload=()=>{window.twemoji.parse(document.body)};const t=document.querySelector("script");t.parentNode.insertBefore(e,t)}document.addEventListener("DOMContentLoaded",(()=>{const s=m(),y=p(s),d=document.getElementById("langswitcher");d&&(d.textContent=y.icon,d.setAttribute("title",y.title),d.addEventListener("click",(()=>{window.location.hostname=y.nextHostname})));const u=document.querySelector("div.filters-box");u.addEventListener("click",(function({target:e}){const[t]=document.getElementsByClassName("filters-box__item _active");t!==e&&e.classList.contains("filters-box__item")&&Array.from(u.children).forEach((t=>{const s=t.getAttribute("data-content");document.getElementsByClassName(s)[0].style.display=e===t?"block":"none",t.classList.toggle("_active")}))}));const{cities:h,flights:g,regions:f}=window.shareData,{citiesSelectorTitle:T,flightsSelectorTitle:b,regionsSelectorTitle:w}=i(window.lang),x={CitiesLayout:new o([],T,h),FlightsLayout:new r([],b,g),RegionsLayout:new l(a,w,c.regionsGeoMap,f)};return new e(new t(document.getElementById("travel-map"),n(x)),x)}))})()})();